// Mission: Assassination Contract
// Campaign: Main Campaign
// Act: 2 - Escalation
// Mission: 001

(function() {
    const mission = {
        id: 'main-02-001',
        campaign: 'main',
        act: 2,
        missionNumber: 1,

        name: 'Assassination Contract',
        title: 'Slums Extraction',
        description: 'Eliminate high-value targets in the slums district without civilian casualties.',
        briefing: 'Crime lords have taken over the slums. Eliminate their leaders but avoid harming innocent civilians.',

        agents: {
            max: 5,
            required: 2,
            recommended: 4
        },

        map: {
            type: 'residential',
            name: 'Slums District',
            width: 90,
            height: 60,
            spawn: { x: 2, y: 58 },
            extraction: { x: 88, y: 2 },

            generation: {
                baseType: 'floor',
                borders: true,

                apartmentBuildings: [
                    { x: 10, y: 10, width: 20, height: 15 },
                    { x: 35, y: 10, width: 20, height: 15 },
                    { x: 60, y: 10, width: 20, height: 15 },
                    { x: 10, y: 35, width: 20, height: 15 },
                    { x: 60, y: 35, width: 20, height: 15 }
                ],

                centralPark: { x: 35, y: 25, width: 20, height: 10 },

                streets: [
                    { type: 'horizontal', y: 30, x1: 0, x2: 89 },
                    { type: 'vertical', x: 45, y1: 0, y2: 59 }
                ]
            },

            embedded: {
                tiles: [
                    "######################################################################################....",
                    "#.........................................................................................",
                    "#.........................................................................................",
                    "#.........................................................................................",
                    "#.........................................................................................",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    "#........................................................................................#",
                    ".........................................................................................#",
                    ".........................................................................................#",
                    ".........................................................................................#",
                    ".....#####################################################################################"
                ],
                spawn: { x: 2, y: 58 },
                extraction: { x: 88, y: 2 },
                items: [],
                doors: [],
                coverCount: 60
            },

            enemySpawns: [
                { x: 20, y: 15 }, { x: 45, y: 15 }, { x: 70, y: 15 },
                { x: 20, y: 40 }, { x: 70, y: 40 },
                { x: 45, y: 30 }
            ],

            coverPositions: 60
        },

        objectives: [
            {
                id: 'eliminate_primary',
                type: 'eliminate',
                target: 'primary_target',
                count: 1,
                required: true,
                description: 'Eliminate crime boss'
            },
            {
                id: 'eliminate_lieutenants',
                type: 'eliminate',
                target: 'lieutenant',
                count: 2,
                required: true,
                description: 'Eliminate lieutenants'
            },
            {
                id: 'avoid_civilians',
                type: 'custom',
                required: false,
                checkFunction: 'checkNoCivilianCasualties'
            },
            {
                id: 'keep_agents_alive',
                type: 'custom',
                required: false,
                checkFunction: 'checkAgentsAlive',
                minAgents: 2
            }
        ],

        enemies: {
            count: 8,
            types: ['guard', 'soldier'],
            special: ['crime_boss', 'lieutenant', 'lieutenant']
        },

        rewards: {
            credits: 4000,
            researchPoints: 125
        }
    };

    if (typeof CampaignSystem !== 'undefined') {
        CampaignSystem.registerMission('main', 2, 'main-02-001', mission);
    }
    if (typeof window !== 'undefined') {
        window.CAMPAIGN_MISSIONS = window.CAMPAIGN_MISSIONS || {};
        window.CAMPAIGN_MISSIONS['main-02-001'] = mission;
    }
})();